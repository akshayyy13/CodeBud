{"ast":null,"code":"import _objectSpread from\"/Users/akshayshrivastava/Desktop/CodeBud/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{toast}from\"react-hot-toast\";import{setUser}from\"../../slices/profileSlice\";import{apiConnector}from\"../apiconnector\";import{settingsEndpoints}from\"../apis\";import{logout}from\"./authAPI\";const{UPDATE_DISPLAY_PICTURE_API,UPDATE_PROFILE_API,CHANGE_PASSWORD_API,DELETE_PROFILE_API}=settingsEndpoints;export function updateDisplayPicture(token,formData){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"PUT\",UPDATE_DISPLAY_PICTURE_API,formData,{\"Content-Type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(token)});// console.log(\n//   \"UPDATE_DISPLAY_PICTURE_API API RESPONSE............\",\n//   response\n// )\nif(!response.data.success){throw new Error(response.data.message);}toast.success(\"Display Picture Updated Successfully\");dispatch(setUser(response.data.data));}catch(error){console.log(\"UPDATE_DISPLAY_PICTURE_API API ERROR............\",error);toast.error(\"Could Not Update Display Picture\");}toast.dismiss(toastId);};}export function updateProfile(token,formData){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"PUT\",UPDATE_PROFILE_API,formData,{Authorization:\"Bearer \".concat(token)});// console.log(\"UPDATE_PROFILE_API API RESPONSE............\", response)\nif(!response.data.success){throw new Error(response.data.message);}// console.log(\"Here ->\",response.data.userDetails)\nconst userImage=response.data.userDetails.image?response.data.userDetails.image:\"https://api.dicebear.com/5.x/initials/svg?seed=\".concat(response.data.userDetails.firstName,\" \").concat(response.data.userDetails.lastName);dispatch(setUser(_objectSpread(_objectSpread({},response.data.userDetails),{},{image:userImage})));// const userImage = response.data.userDetails.image\n// ? response.data.userDetails.image\n// : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.userDetails.firstName} ${response.data.userDetails.lastName}`\n// dispatch(\n//   setUser({ ...response.data.profileDetails, image: userImage })\n//   )\n// console.log(\"Here\")\nvar demo=JSON.stringify(response.data.profileDetails);console.log(\"Demo :\",demo,demo.length);// console.log(\" Local Storage :\", localStorage.user , localStorage.user.length);\n// let x = localStorage.user;\n// console.log(\"x-->\",typeof(x))\n// JSON.parse(x);\n// console.log(\"x-->\",typeof(x))\n// JSON.stringify(x)\n// console.log(\"x-->\",typeof(x))\ntoast.success(\"Profile Updated Successfully\");}catch(error){console.log(\"UPDATE_PROFILE_API API ERROR............\",error);toast.error(\"Could Not Update Profile\");}toast.dismiss(toastId);};}export async function changePassword(token,formData){const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"POST\",CHANGE_PASSWORD_API,formData,{authorization:\"Bearer \".concat(token)});// console.log(\"CHANGE_PASSWORD_API API RESPONSE............\", response)\nif(!response.data.success){throw new Error(response.data.message);}toast.success(\"Password Changed Successfully\");}catch(error){// console.log(\"CHANGE_PASSWORD_API API ERROR............\", error)\ntoast.error(error.response.data.message);}toast.dismiss(toastId);}export function deleteProfile(token,navigate){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"DELETE\",DELETE_PROFILE_API,null,{authorization:\"Bearer \".concat(token)});// console.log(\"DELETE_PROFILE_API API RESPONSE............\", response)\nif(!response.data.success){throw new Error(response.data.message);}toast.success(\"Profile Deleted Successfully\");dispatch(logout(navigate));}catch(error){console.log(\"DELETE_PROFILE_API API ERROR............\",error);toast.error(\"Could Not Delete Profile\");}toast.dismiss(toastId);};}","map":{"version":3,"names":["toast","setUser","apiConnector","settingsEndpoints","logout","UPDATE_DISPLAY_PICTURE_API","UPDATE_PROFILE_API","CHANGE_PASSWORD_API","DELETE_PROFILE_API","updateDisplayPicture","token","formData","dispatch","toastId","loading","response","Authorization","concat","data","success","Error","message","error","console","log","dismiss","updateProfile","userImage","userDetails","image","firstName","lastName","_objectSpread","demo","JSON","stringify","profileDetails","length","changePassword","authorization","deleteProfile","navigate"],"sources":["/Users/akshayshrivastava/Desktop/CodeBud/client/src/services/operations/SettingsAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\n\nimport { setUser } from \"../../slices/profileSlice\"\nimport { apiConnector } from \"../apiconnector\"\nimport { settingsEndpoints } from \"../apis\"\nimport { logout } from \"./authAPI\"\n\nconst {\n  UPDATE_DISPLAY_PICTURE_API,\n  UPDATE_PROFILE_API,\n  CHANGE_PASSWORD_API,\n  DELETE_PROFILE_API,\n} = settingsEndpoints\n\nexport function updateDisplayPicture(token, formData) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    try {\n      const response = await apiConnector(\n        \"PUT\",\n        UPDATE_DISPLAY_PICTURE_API,\n        formData,\n        {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`,\n        }\n      )\n      // console.log(\n      //   \"UPDATE_DISPLAY_PICTURE_API API RESPONSE............\",\n      //   response\n      // )\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      toast.success(\"Display Picture Updated Successfully\")\n      dispatch(setUser(response.data.data))\n    } catch (error) {\n      console.log(\"UPDATE_DISPLAY_PICTURE_API API ERROR............\", error)\n      toast.error(\"Could Not Update Display Picture\")\n    }\n    toast.dismiss(toastId)\n  }\n}\n\nexport function updateProfile(token, formData) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    try {\n      const response = await apiConnector(\"PUT\", UPDATE_PROFILE_API, formData, {\n        Authorization: `Bearer ${token}`,\n      })\n      // console.log(\"UPDATE_PROFILE_API API RESPONSE............\", response)\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      // console.log(\"Here ->\",response.data.userDetails)\n      const userImage = response.data.userDetails.image\n      ? response.data.userDetails.image\n      : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.userDetails.firstName} ${response.data.userDetails.lastName}`\n      dispatch(\n        setUser({ ...response.data.userDetails, image: userImage })\n        )\n      // const userImage = response.data.userDetails.image\n      // ? response.data.userDetails.image\n      // : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.userDetails.firstName} ${response.data.userDetails.lastName}`\n      // dispatch(\n      //   setUser({ ...response.data.profileDetails, image: userImage })\n      //   )\n        // console.log(\"Here\")\n        var demo=JSON.stringify(response.data.profileDetails);\n        console.log(\"Demo :\", demo , demo.length)\n        // console.log(\" Local Storage :\", localStorage.user , localStorage.user.length);\n        // let x = localStorage.user;\n        // console.log(\"x-->\",typeof(x))\n        // JSON.parse(x);\n        // console.log(\"x-->\",typeof(x))\n        // JSON.stringify(x)\n        // console.log(\"x-->\",typeof(x))\n\n      toast.success(\"Profile Updated Successfully\")\n    } catch (error) {\n      console.log(\"UPDATE_PROFILE_API API ERROR............\", error)\n      toast.error(\"Could Not Update Profile\")\n    }\n    toast.dismiss(toastId)\n  }\n}\n\nexport async function changePassword(token, formData) {\n  const toastId = toast.loading(\"Loading...\")\n  try {\n    const response = await apiConnector(\"POST\", CHANGE_PASSWORD_API, formData, {\n      authorization: `Bearer ${token}`,\n    })\n    // console.log(\"CHANGE_PASSWORD_API API RESPONSE............\", response)\n\n    if (!response.data.success) {\n      throw new Error(response.data.message)\n    }\n    toast.success(\"Password Changed Successfully\")\n  } catch (error) {\n    // console.log(\"CHANGE_PASSWORD_API API ERROR............\", error)\n    toast.error(error.response.data.message)\n  }\n  toast.dismiss(toastId)\n}\n\nexport function deleteProfile(token, navigate) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    try {\n      const response = await apiConnector(\"DELETE\", DELETE_PROFILE_API, null, {\n        authorization: `Bearer ${token}`,\n      })\n      // console.log(\"DELETE_PROFILE_API API RESPONSE............\", response)\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      toast.success(\"Profile Deleted Successfully\")\n      dispatch(logout(navigate))\n    } catch (error) {\n      console.log(\"DELETE_PROFILE_API API ERROR............\", error)\n      toast.error(\"Could Not Delete Profile\")\n    }\n    toast.dismiss(toastId)\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}