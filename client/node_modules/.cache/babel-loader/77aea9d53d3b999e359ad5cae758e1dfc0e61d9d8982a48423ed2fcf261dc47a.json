{"ast":null,"code":"import{useSelector}from\"react-redux\";import{Table,Tbody,Td,Th,Thead,Tr}from\"react-super-responsive-table\";import\"react-super-responsive-table/dist/SuperResponsiveTableStyle.css\";import{useState}from\"react\";import{FaCheck}from\"react-icons/fa\";import{FiEdit2}from\"react-icons/fi\";import{HiClock}from\"react-icons/hi\";import{RiDeleteBin6Line}from\"react-icons/ri\";import{useNavigate}from\"react-router-dom\";import{formatDate}from\"../../../../services/formatDate\";import{deleteCourse,fetchInstructorCourses}from\"../../../../services/operations/courseDetailsAPI\";import{COURSE_STATUS}from\"../../../../utils/constants\";import ConfirmationModal from\"../../../common/ConfirmationModal\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CoursesTable(_ref){let{courses,setCourses}=_ref;const navigate=useNavigate();const{token}=useSelector(state=>state.auth);const[loading,setLoading]=useState(false);const[confirmationModal,setConfirmationModal]=useState(null);const TRUNCATE_LENGTH=30;const handleCourseDelete=async courseId=>{setLoading(true);await deleteCourse({courseId:courseId},token);const result=await fetchInstructorCourses(token);if(result){setCourses(result);}setConfirmationModal(null);setLoading(false);};// console.log(\"All Course \", courses)\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{className:\"rounded-xl border border-richblack-800 \",children:[/*#__PURE__*/_jsx(Thead,{children:/*#__PURE__*/_jsxs(Tr,{className:\"flex gap-x-10 rounded-t-md border-b border-b-richblack-800 px-6 py-2\",children:[/*#__PURE__*/_jsx(Th,{className:\"flex-1 text-left text-sm font-medium uppercase text-richblack-100\",children:\"Courses\"}),/*#__PURE__*/_jsx(Th,{className:\"text-left text-sm font-medium uppercase text-richblack-100\",children:\"Duration\"}),/*#__PURE__*/_jsx(Th,{className:\"text-left text-sm font-medium uppercase text-richblack-100\",children:\"Price\"}),/*#__PURE__*/_jsx(Th,{className:\"text-left text-sm font-medium uppercase text-richblack-100\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(Tbody,{children:(courses===null||courses===void 0?void 0:courses.length)===0?/*#__PURE__*/_jsx(Tr,{children:/*#__PURE__*/_jsx(Td,{className:\"py-10 text-center text-2xl font-medium text-richblack-100\",children:\"No courses found\"})}):courses===null||courses===void 0?void 0:courses.map(course=>/*#__PURE__*/_jsxs(Tr,{className:\"flex gap-x-10 border-b border-richblack-800 px-6 py-8\",children:[/*#__PURE__*/_jsxs(Td,{className:\"flex flex-1 gap-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:course===null||course===void 0?void 0:course.thumbnail,alt:course===null||course===void 0?void 0:course.courseName,className:\"h-[148px] w-[220px] rounded-lg object-cover\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-richblack-5\",children:course.courseName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-richblack-300\",children:course.courseDescription.split(\" \").length>TRUNCATE_LENGTH?course.courseDescription.split(\" \").slice(0,TRUNCATE_LENGTH).join(\" \")+\"...\":course.courseDescription}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[12px] text-white\",children:[\"Created: \",formatDate(course.createdAt)]}),course.status===COURSE_STATUS.DRAFT?/*#__PURE__*/_jsxs(\"p\",{className:\"flex w-fit flex-row items-center gap-2 rounded-full bg-richblack-700 px-2 py-[2px] text-[12px] font-medium text-pink-100\",children:[/*#__PURE__*/_jsx(HiClock,{size:14}),\"Drafted\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-fit flex-row items-center gap-2 rounded-full bg-richblack-700 px-2 py-[2px] text-[12px] font-medium text-yellow-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-3 w-3 items-center justify-center rounded-full bg-yellow-100 text-richblack-700\",children:/*#__PURE__*/_jsx(FaCheck,{size:8})}),\"Published\"]})]})]}),/*#__PURE__*/_jsx(Td,{className:\"text-sm font-medium text-richblack-100\",children:\"2hr 30min\"}),/*#__PURE__*/_jsxs(Td,{className:\"text-sm font-medium text-richblack-100\",children:[\"\\u20B9\",course.price]}),/*#__PURE__*/_jsxs(Td,{className:\"text-sm font-medium text-richblack-100 \",children:[/*#__PURE__*/_jsx(\"button\",{disabled:loading,onClick:()=>{navigate(\"/dashboard/edit-course/\".concat(course._id));},title:\"Edit\",className:\"px-2 transition-all duration-200 hover:scale-110 hover:text-caribbeangreen-300\",children:/*#__PURE__*/_jsx(FiEdit2,{size:20})}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,onClick:()=>{setConfirmationModal({text1:\"Do you want to delete this course?\",text2:\"All the data related to this course will be deleted\",btn1Text:!loading?\"Delete\":\"Loading...  \",btn2Text:\"Cancel\",btn1Handler:!loading?()=>handleCourseDelete(course._id):()=>{},btn2Handler:!loading?()=>setConfirmationModal(null):()=>{}});},title:\"Delete\",className:\"px-1 transition-all duration-200 hover:scale-110 hover:text-[#ff0000]\",children:/*#__PURE__*/_jsx(RiDeleteBin6Line,{size:20})})]})]},course._id))})]}),confirmationModal&&/*#__PURE__*/_jsx(ConfirmationModal,{modalData:confirmationModal})]});}","map":{"version":3,"names":["useSelector","Table","Tbody","Td","Th","Thead","Tr","useState","FaCheck","FiEdit2","HiClock","RiDeleteBin6Line","useNavigate","formatDate","deleteCourse","fetchInstructorCourses","COURSE_STATUS","ConfirmationModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CoursesTable","_ref","courses","setCourses","navigate","token","state","auth","loading","setLoading","confirmationModal","setConfirmationModal","TRUNCATE_LENGTH","handleCourseDelete","courseId","result","children","className","length","map","course","src","thumbnail","alt","courseName","courseDescription","split","slice","join","createdAt","status","DRAFT","size","price","disabled","onClick","concat","_id","title","text1","text2","btn1Text","btn2Text","btn1Handler","btn2Handler","modalData"],"sources":["/Users/akshayshrivastava/Desktop/CodeBud/client/src/components/core/Dashboard/InstructorCourses/CoursesTable.jsx"],"sourcesContent":["import {  useSelector } from \"react-redux\"\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"react-super-responsive-table\"\n\n\nimport \"react-super-responsive-table/dist/SuperResponsiveTableStyle.css\"\nimport { useState } from \"react\"\nimport { FaCheck } from \"react-icons/fa\"\nimport { FiEdit2 } from \"react-icons/fi\"\nimport { HiClock } from \"react-icons/hi\"\nimport { RiDeleteBin6Line } from \"react-icons/ri\"\nimport { useNavigate } from \"react-router-dom\"\n\nimport { formatDate } from \"../../../../services/formatDate\"\nimport {\n  deleteCourse,\n  fetchInstructorCourses,\n} from \"../../../../services/operations/courseDetailsAPI\"\nimport { COURSE_STATUS } from \"../../../../utils/constants\"\nimport ConfirmationModal from \"../../../common/ConfirmationModal\"\n\nexport default function CoursesTable({ courses, setCourses }) {\n\n  const navigate = useNavigate()\n  const { token } = useSelector((state) => state.auth)\n  const [loading, setLoading] = useState(false)\n  const [confirmationModal, setConfirmationModal] = useState(null)\n  const TRUNCATE_LENGTH = 30\n\n  const handleCourseDelete = async (courseId) => {\n    setLoading(true)\n    await deleteCourse({ courseId: courseId }, token)\n    const result = await fetchInstructorCourses(token)\n    if (result) {\n      setCourses(result)\n    }\n    setConfirmationModal(null)\n    setLoading(false)\n  }\n\n  // console.log(\"All Course \", courses)\n\n  return (\n    <>\n      <Table className=\"rounded-xl border border-richblack-800 \">\n        <Thead>\n          <Tr className=\"flex gap-x-10 rounded-t-md border-b border-b-richblack-800 px-6 py-2\">\n            <Th className=\"flex-1 text-left text-sm font-medium uppercase text-richblack-100\">\n              Courses\n            </Th>\n            <Th className=\"text-left text-sm font-medium uppercase text-richblack-100\">\n              Duration\n            </Th>\n            <Th className=\"text-left text-sm font-medium uppercase text-richblack-100\">\n              Price\n            </Th>\n            <Th className=\"text-left text-sm font-medium uppercase text-richblack-100\">\n              Actions\n            </Th>\n          </Tr>\n        </Thead>\n        <Tbody>\n          {courses?.length === 0 ? (\n            <Tr>\n              <Td className=\"py-10 text-center text-2xl font-medium text-richblack-100\">\n                No courses found\n                {/* TODO: Need to change this state */}\n              </Td>\n            </Tr>\n          ) : (\n            courses?.map((course) => (\n              <Tr\n                key={course._id}\n                className=\"flex gap-x-10 border-b border-richblack-800 px-6 py-8\"\n              >\n                <Td className=\"flex flex-1 gap-x-4\">\n                  <img\n                    src={course?.thumbnail}\n                    alt={course?.courseName}\n                    className=\"h-[148px] w-[220px] rounded-lg object-cover\"\n                  />\n                  <div className=\"flex flex-col justify-between\">\n                    <p className=\"text-lg font-semibold text-richblack-5\">\n                      {course.courseName}\n                    </p>\n                    <p className=\"text-xs text-richblack-300\">\n                      {course.courseDescription.split(\" \").length >\n                      TRUNCATE_LENGTH\n                        ? course.courseDescription\n                            .split(\" \")\n                            .slice(0, TRUNCATE_LENGTH)\n                            .join(\" \") + \"...\"\n                        : course.courseDescription}\n                    </p>\n                    <p className=\"text-[12px] text-white\">\n                      Created: {formatDate(course.createdAt)}\n                    </p>\n                    {course.status === COURSE_STATUS.DRAFT ? (\n                      <p className=\"flex w-fit flex-row items-center gap-2 rounded-full bg-richblack-700 px-2 py-[2px] text-[12px] font-medium text-pink-100\">\n                        <HiClock size={14} />\n                        Drafted\n                      </p>\n                    ) : (\n                      <div className=\"flex w-fit flex-row items-center gap-2 rounded-full bg-richblack-700 px-2 py-[2px] text-[12px] font-medium text-yellow-100\">\n                        <div className=\"flex h-3 w-3 items-center justify-center rounded-full bg-yellow-100 text-richblack-700\">\n                          <FaCheck size={8} />\n                        </div>\n                        Published\n                      </div>\n                    )}\n                  </div>\n                </Td>\n                <Td className=\"text-sm font-medium text-richblack-100\">\n                  2hr 30min\n                </Td>\n                <Td className=\"text-sm font-medium text-richblack-100\">\n                  â‚¹{course.price}\n                </Td>\n                <Td className=\"text-sm font-medium text-richblack-100 \">\n                  <button\n                    disabled={loading}\n                    onClick={() => {\n                      navigate(`/dashboard/edit-course/${course._id}`)\n                    }}\n                    title=\"Edit\"\n                    className=\"px-2 transition-all duration-200 hover:scale-110 hover:text-caribbeangreen-300\"\n                  >\n                    <FiEdit2 size={20} />\n                  </button>\n                  <button\n                    disabled={loading}\n                    onClick={() => {\n                      setConfirmationModal({\n                        text1: \"Do you want to delete this course?\",\n                        text2:\n                          \"All the data related to this course will be deleted\",\n                        btn1Text: !loading ? \"Delete\" : \"Loading...  \",\n                        btn2Text: \"Cancel\",\n                        btn1Handler: !loading\n                          ? () => handleCourseDelete(course._id)\n                          : () => {},\n                        btn2Handler: !loading\n                          ? () => setConfirmationModal(null)\n                          : () => {},\n                      })\n                    }}\n                    title=\"Delete\"\n                    className=\"px-1 transition-all duration-200 hover:scale-110 hover:text-[#ff0000]\"\n                  >\n                    <RiDeleteBin6Line size={20} />\n                  </button>\n                </Td>\n              </Tr>\n            ))\n          )}\n        </Tbody>\n      </Table>\n      {confirmationModal && <ConfirmationModal modalData={confirmationModal} />}\n    </>\n  )\n}"],"mappings":"AAAA,OAAUA,WAAW,KAAQ,aAAa,CAC1C,OAASC,KAAK,CAAEC,KAAK,CAAEC,EAAE,CAAEC,EAAE,CAAEC,KAAK,CAAEC,EAAE,KAAQ,8BAA8B,CAG9E,MAAO,iEAAiE,CACxE,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,OAAO,KAAQ,gBAAgB,CACxC,OAASC,OAAO,KAAQ,gBAAgB,CACxC,OAASC,OAAO,KAAQ,gBAAgB,CACxC,OAASC,gBAAgB,KAAQ,gBAAgB,CACjD,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,OAASC,UAAU,KAAQ,iCAAiC,CAC5D,OACEC,YAAY,CACZC,sBAAsB,KACjB,kDAAkD,CACzD,OAASC,aAAa,KAAQ,6BAA6B,CAC3D,MAAO,CAAAC,iBAAiB,KAAM,mCAAmC,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEjE,cAAe,SAAS,CAAAC,YAAYA,CAAAC,IAAA,CAA0B,IAAzB,CAAEC,OAAO,CAAEC,UAAW,CAAC,CAAAF,IAAA,CAE1D,KAAM,CAAAG,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEiB,KAAM,CAAC,CAAG7B,WAAW,CAAE8B,KAAK,EAAKA,KAAK,CAACC,IAAI,CAAC,CACpD,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC2B,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAAA6B,eAAe,CAAG,EAAE,CAE1B,KAAM,CAAAC,kBAAkB,CAAG,KAAO,CAAAC,QAAQ,EAAK,CAC7CL,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAnB,YAAY,CAAC,CAAEwB,QAAQ,CAAEA,QAAS,CAAC,CAAET,KAAK,CAAC,CACjD,KAAM,CAAAU,MAAM,CAAG,KAAM,CAAAxB,sBAAsB,CAACc,KAAK,CAAC,CAClD,GAAIU,MAAM,CAAE,CACVZ,UAAU,CAACY,MAAM,CAAC,CACpB,CACAJ,oBAAoB,CAAC,IAAI,CAAC,CAC1BF,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED;AAEA,mBACEZ,KAAA,CAAAE,SAAA,EAAAiB,QAAA,eACEnB,KAAA,CAACpB,KAAK,EAACwC,SAAS,CAAC,yCAAyC,CAAAD,QAAA,eACxDrB,IAAA,CAACd,KAAK,EAAAmC,QAAA,cACJnB,KAAA,CAACf,EAAE,EAACmC,SAAS,CAAC,sEAAsE,CAAAD,QAAA,eAClFrB,IAAA,CAACf,EAAE,EAACqC,SAAS,CAAC,mEAAmE,CAAAD,QAAA,CAAC,SAElF,CAAI,CAAC,cACLrB,IAAA,CAACf,EAAE,EAACqC,SAAS,CAAC,4DAA4D,CAAAD,QAAA,CAAC,UAE3E,CAAI,CAAC,cACLrB,IAAA,CAACf,EAAE,EAACqC,SAAS,CAAC,4DAA4D,CAAAD,QAAA,CAAC,OAE3E,CAAI,CAAC,cACLrB,IAAA,CAACf,EAAE,EAACqC,SAAS,CAAC,4DAA4D,CAAAD,QAAA,CAAC,SAE3E,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACRrB,IAAA,CAACjB,KAAK,EAAAsC,QAAA,CACH,CAAAd,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEgB,MAAM,IAAK,CAAC,cACpBvB,IAAA,CAACb,EAAE,EAAAkC,QAAA,cACDrB,IAAA,CAAChB,EAAE,EAACsC,SAAS,CAAC,2DAA2D,CAAAD,QAAA,CAAC,kBAExE,CACE,CAAC,CACH,CAAC,CAELd,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEiB,GAAG,CAAEC,MAAM,eAClBvB,KAAA,CAACf,EAAE,EAEDmC,SAAS,CAAC,uDAAuD,CAAAD,QAAA,eAEjEnB,KAAA,CAAClB,EAAE,EAACsC,SAAS,CAAC,qBAAqB,CAAAD,QAAA,eACjCrB,IAAA,QACE0B,GAAG,CAAED,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEE,SAAU,CACvBC,GAAG,CAAEH,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEI,UAAW,CACxBP,SAAS,CAAC,6CAA6C,CACxD,CAAC,cACFpB,KAAA,QAAKoB,SAAS,CAAC,+BAA+B,CAAAD,QAAA,eAC5CrB,IAAA,MAAGsB,SAAS,CAAC,wCAAwC,CAAAD,QAAA,CAClDI,MAAM,CAACI,UAAU,CACjB,CAAC,cACJ7B,IAAA,MAAGsB,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CACtCI,MAAM,CAACK,iBAAiB,CAACC,KAAK,CAAC,GAAG,CAAC,CAACR,MAAM,CAC3CN,eAAe,CACXQ,MAAM,CAACK,iBAAiB,CACrBC,KAAK,CAAC,GAAG,CAAC,CACVC,KAAK,CAAC,CAAC,CAAEf,eAAe,CAAC,CACzBgB,IAAI,CAAC,GAAG,CAAC,CAAG,KAAK,CACpBR,MAAM,CAACK,iBAAiB,CAC3B,CAAC,cACJ5B,KAAA,MAAGoB,SAAS,CAAC,wBAAwB,CAAAD,QAAA,EAAC,WAC3B,CAAC3B,UAAU,CAAC+B,MAAM,CAACS,SAAS,CAAC,EACrC,CAAC,CACHT,MAAM,CAACU,MAAM,GAAKtC,aAAa,CAACuC,KAAK,cACpClC,KAAA,MAAGoB,SAAS,CAAC,0HAA0H,CAAAD,QAAA,eACrIrB,IAAA,CAACT,OAAO,EAAC8C,IAAI,CAAE,EAAG,CAAE,CAAC,UAEvB,EAAG,CAAC,cAEJnC,KAAA,QAAKoB,SAAS,CAAC,4HAA4H,CAAAD,QAAA,eACzIrB,IAAA,QAAKsB,SAAS,CAAC,wFAAwF,CAAAD,QAAA,cACrGrB,IAAA,CAACX,OAAO,EAACgD,IAAI,CAAE,CAAE,CAAE,CAAC,CACjB,CAAC,YAER,EAAK,CACN,EACE,CAAC,EACJ,CAAC,cACLrC,IAAA,CAAChB,EAAE,EAACsC,SAAS,CAAC,wCAAwC,CAAAD,QAAA,CAAC,WAEvD,CAAI,CAAC,cACLnB,KAAA,CAAClB,EAAE,EAACsC,SAAS,CAAC,wCAAwC,CAAAD,QAAA,EAAC,QACpD,CAACI,MAAM,CAACa,KAAK,EACZ,CAAC,cACLpC,KAAA,CAAClB,EAAE,EAACsC,SAAS,CAAC,yCAAyC,CAAAD,QAAA,eACrDrB,IAAA,WACEuC,QAAQ,CAAE1B,OAAQ,CAClB2B,OAAO,CAAEA,CAAA,GAAM,CACb/B,QAAQ,2BAAAgC,MAAA,CAA2BhB,MAAM,CAACiB,GAAG,CAAE,CAAC,CAClD,CAAE,CACFC,KAAK,CAAC,MAAM,CACZrB,SAAS,CAAC,gFAAgF,CAAAD,QAAA,cAE1FrB,IAAA,CAACV,OAAO,EAAC+C,IAAI,CAAE,EAAG,CAAE,CAAC,CACf,CAAC,cACTrC,IAAA,WACEuC,QAAQ,CAAE1B,OAAQ,CAClB2B,OAAO,CAAEA,CAAA,GAAM,CACbxB,oBAAoB,CAAC,CACnB4B,KAAK,CAAE,oCAAoC,CAC3CC,KAAK,CACH,qDAAqD,CACvDC,QAAQ,CAAE,CAACjC,OAAO,CAAG,QAAQ,CAAG,cAAc,CAC9CkC,QAAQ,CAAE,QAAQ,CAClBC,WAAW,CAAE,CAACnC,OAAO,CACjB,IAAMK,kBAAkB,CAACO,MAAM,CAACiB,GAAG,CAAC,CACpC,IAAM,CAAC,CAAC,CACZO,WAAW,CAAE,CAACpC,OAAO,CACjB,IAAMG,oBAAoB,CAAC,IAAI,CAAC,CAChC,IAAM,CAAC,CACb,CAAC,CAAC,CACJ,CAAE,CACF2B,KAAK,CAAC,QAAQ,CACdrB,SAAS,CAAC,uEAAuE,CAAAD,QAAA,cAEjFrB,IAAA,CAACR,gBAAgB,EAAC6C,IAAI,CAAE,EAAG,CAAE,CAAC,CACxB,CAAC,EACP,CAAC,GA/EAZ,MAAM,CAACiB,GAgFV,CACL,CACF,CACI,CAAC,EACH,CAAC,CACP3B,iBAAiB,eAAIf,IAAA,CAACF,iBAAiB,EAACoD,SAAS,CAAEnC,iBAAkB,CAAE,CAAC,EACzE,CAAC,CAEP","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}