{"ast":null,"code":"import _objectSpread from\"/Users/akshayshrivastava/Desktop/CodeBud/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{toast}from\"react-hot-toast\";import{setLoading,setUser}from\"../../slices/profileSlice\";import{apiConnector}from\"../apiconnector\";import{profileEndpoints}from\"../apis\";import{logout}from\"./authAPI\";const{GET_USER_DETAILS_API,GET_USER_ENROLLED_COURSES_API,GET_INSTRUCTOR_DATA_API}=profileEndpoints;export function getUserDetails(token,navigate){return async dispatch=>{const toastId=toast.loading(\"Loading...\");dispatch(setLoading(true));try{const response=await apiConnector(\"GET\",GET_USER_DETAILS_API,null,{authorization:\"Bearer \".concat(token)});// console.log(\"GET_USER_DETAILS API RESPONSE............\", response)\nif(!response.data.success){throw new Error(response.data.message);}const userImage=response.data.data.image?response.data.data.image:\"https://api.dicebear.com/5.x/initials/svg?seed=\".concat(response.data.data.firstName,\" \").concat(response.data.data.lastName);dispatch(setUser(_objectSpread(_objectSpread({},response.data.data),{},{image:userImage})));}catch(error){dispatch(logout(navigate));console.log(\"GET_USER_DETAILS API ERROR............\",error);toast.error(\"Could Not Get User Details\");}toast.dismiss(toastId);dispatch(setLoading(false));};}export async function getUserEnrolledCourses(token){const toastId=toast.loading(\"Loading...\");let result=[];try{// console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\nconst response=await apiConnector(\"GET\",GET_USER_ENROLLED_COURSES_API,token,{Authorization:\"Bearer \".concat(token)});// console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\",response);\n// console.log(\n//   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n//   response\n// )\nif(!response.data.success){throw new Error(response.data.message);}result=response.data.data;}catch(error){console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\",error);toast.error(\"Could Not Get Enrolled Courses\");}toast.dismiss(toastId);return result;}export async function getInstructorData(token){const toastId=toast.loading(\"Loading...\");let result=[];try{var _response$data;// console.log(\"Starting\")\nconst response=await apiConnector(\"GET\",GET_INSTRUCTOR_DATA_API,null,{Authorization:\"Bearer \".concat(token)});// console.log(\"Starting res\")\n// console.log(\"GET_INSTRUCTOR_DATA_API API RESPONSE............\", response);\nresult=response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.courses;}catch(error){console.log(\"GET_INSTRUCTOR_DATA_API API ERROR............\",error);toast.error(\"Could Not Get Instructor Data\");}toast.dismiss(toastId);return result;}","map":{"version":3,"names":["toast","setLoading","setUser","apiConnector","profileEndpoints","logout","GET_USER_DETAILS_API","GET_USER_ENROLLED_COURSES_API","GET_INSTRUCTOR_DATA_API","getUserDetails","token","navigate","dispatch","toastId","loading","response","authorization","concat","data","success","Error","message","userImage","image","firstName","lastName","_objectSpread","error","console","log","dismiss","getUserEnrolledCourses","result","Authorization","getInstructorData","_response$data","courses"],"sources":["/Users/akshayshrivastava/Desktop/CodeBud/client/src/services/operations/profileAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\n\nimport { setLoading, setUser } from \"../../slices/profileSlice\"\nimport { apiConnector } from \"../apiconnector\"\nimport { profileEndpoints } from \"../apis\"\nimport { logout } from \"./authAPI\"\n\nconst {\n  GET_USER_DETAILS_API,\n  GET_USER_ENROLLED_COURSES_API,\n  GET_INSTRUCTOR_DATA_API,\n} = profileEndpoints;\n\nexport function getUserDetails(token, navigate) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    dispatch(setLoading(true))\n    try {\n      const response = await apiConnector(\"GET\", GET_USER_DETAILS_API, null, {\n        authorization: `Bearer ${token}`,\n      })\n      // console.log(\"GET_USER_DETAILS API RESPONSE............\", response)\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      const userImage = response.data.data.image\n        ? response.data.data.image\n        : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.data.firstName} ${response.data.data.lastName}`\n      dispatch(setUser({ ...response.data.data, image: userImage }))\n    } catch (error) {\n      dispatch(logout(navigate))\n      console.log(\"GET_USER_DETAILS API ERROR............\", error)\n      toast.error(\"Could Not Get User Details\")\n    }\n    toast.dismiss(toastId)\n    dispatch(setLoading(false))\n  }\n}\n\nexport async function getUserEnrolledCourses(token) {\n  const toastId = toast.loading(\"Loading...\")\n  let result = []\n  try {\n    // console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\n    \n    const response = await apiConnector(\n      \"GET\",\n      GET_USER_ENROLLED_COURSES_API,\n      token,\n      {\n        Authorization: `Bearer ${token}`,\n      }\n    )\n    // console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\",response);\n    // console.log(\n    //   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n    //   response\n    // )\n\n    if (!response.data.success) {\n      throw new Error(response.data.message)\n    }\n    result = response.data.data\n  } catch (error) {\n    console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\", error)\n    toast.error(\"Could Not Get Enrolled Courses\")\n  }\n  toast.dismiss(toastId)\n  return result\n}\n\nexport async function getInstructorData(token) {\n  const toastId = toast.loading(\"Loading...\");\n  let result = [];\n  try {\n    // console.log(\"Starting\")\n    const response = await apiConnector(\"GET\", GET_INSTRUCTOR_DATA_API, null, {\n      Authorization: `Bearer ${token}`,\n    });\n    // console.log(\"Starting res\")\n    // console.log(\"GET_INSTRUCTOR_DATA_API API RESPONSE............\", response);\n    result = response?.data?.courses;\n  } catch (error) {\n    console.log(\"GET_INSTRUCTOR_DATA_API API ERROR............\", error);\n    toast.error(\"Could Not Get Instructor Data\");\n  }\n  toast.dismiss(toastId);\n  return result;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}