{"ast":null,"code":"import _objectSpread from\"/Users/akshayshrivastava/Desktop/CodeBud/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useRef,useState}from\"react\";import{useDropzone}from\"react-dropzone\";import{FiUploadCloud}from\"react-icons/fi\";// import { useSelector } from \"react-redux\"\nimport\"video-react/dist/video-react.css\";import{Player}from\"video-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Upload(_ref){let{name,label,register,setValue,errors,video=false,viewData=null,editData=null}=_ref;// const { course } = useSelector((state) => state.course)\nconst[selectedFile,setSelectedFile]=useState(null);const[previewSource,setPreviewSource]=useState(viewData?viewData:editData?editData:\"\");const inputRef=useRef(null);const onDrop=acceptedFiles=>{const file=acceptedFiles[0];if(file){previewFile(file);setSelectedFile(file);}};const{getRootProps,getInputProps,isDragActive}=useDropzone({accept:!video?{\"image/*\":[\".jpeg\",\".jpg\",\".png\"]}:{\"video/*\":[\".mp4\"]},onDrop});const previewFile=file=>{// console.log(file)\nconst reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=()=>{setPreviewSource(reader.result);};};useEffect(()=>{register(name,{required:true});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[register]);useEffect(()=>{setValue(name,selectedFile);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[selectedFile,setValue]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-richblack-5\",htmlFor:name,children:[label,\" \",!viewData&&/*#__PURE__*/_jsx(\"sup\",{className:\"text-pink-200\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(isDragActive?\"bg-richblack-600\":\"bg-richblack-700\",\" flex min-h-[250px] cursor-pointer items-center justify-center rounded-md border-2 border-dotted border-richblack-500\"),children:previewSource?/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-col p-6\",children:[!video?/*#__PURE__*/_jsx(\"img\",{src:previewSource,alt:\"Preview\",className:\"h-full w-full rounded-md object-cover\"}):/*#__PURE__*/_jsx(Player,{aspectRatio:\"16:9\",playsInline:true,src:previewSource}),!viewData&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setPreviewSource(\"\");setSelectedFile(null);setValue(name,null);},className:\"mt-3 text-richblack-400 underline\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({className:\"flex w-full flex-col items-center p-6\"},getRootProps()),{},{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},getInputProps()),{},{ref:inputRef})),/*#__PURE__*/_jsx(\"div\",{className:\"grid aspect-square w-14 place-items-center rounded-full bg-pure-greys-800\",children:/*#__PURE__*/_jsx(FiUploadCloud,{className:\"text-2xl text-yellow-50\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 max-w-[200px] text-center text-sm text-richblack-200\",children:[\"Drag and drop an \",!video?\"image\":\"video\",\", or click to\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-yellow-50\",children:\"Browse\"}),\" a file\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mt-10 flex list-disc justify-between space-x-12 text-center  text-xs text-richblack-200\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Aspect ratio 16:9\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Recommended size 1024x576\"})]})]}))}),errors[name]&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs tracking-wide text-pink-200\",children:[label,\" is required\"]})]});}","map":{"version":3,"names":["useEffect","useRef","useState","useDropzone","FiUploadCloud","Player","jsx","_jsx","jsxs","_jsxs","Upload","_ref","name","label","register","setValue","errors","video","viewData","editData","selectedFile","setSelectedFile","previewSource","setPreviewSource","inputRef","onDrop","acceptedFiles","file","previewFile","getRootProps","getInputProps","isDragActive","accept","reader","FileReader","readAsDataURL","onloadend","result","required","className","children","htmlFor","concat","src","alt","aspectRatio","playsInline","type","onClick","_objectSpread","ref"],"sources":["/Users/akshayshrivastava/Desktop/CodeBud/client/src/components/core/Dashboard/AddCourse/Upload.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\"\nimport { useDropzone } from \"react-dropzone\"\nimport { FiUploadCloud } from \"react-icons/fi\"\n// import { useSelector } from \"react-redux\"\n\nimport \"video-react/dist/video-react.css\"\nimport { Player } from \"video-react\"\n\nexport default function Upload({\n  name,\n  label,\n  register,\n  setValue,\n  errors,\n  video = false,\n  viewData = null,\n  editData = null,\n}) {\n  // const { course } = useSelector((state) => state.course)\n  const [selectedFile, setSelectedFile] = useState(null)\n  const [previewSource, setPreviewSource] = useState(\n    viewData ? viewData : editData ? editData : \"\"\n  )\n  const inputRef = useRef(null)\n\n  const onDrop = (acceptedFiles) => {\n    const file = acceptedFiles[0]\n    if (file) {\n      previewFile(file)\n      setSelectedFile(file)\n    }\n  }\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    accept: !video\n      ? { \"image/*\": [\".jpeg\", \".jpg\", \".png\"] }\n      : { \"video/*\": [\".mp4\"] },\n    onDrop,\n  })\n\n  const previewFile = (file) => {\n    // console.log(file)\n    const reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onloadend = () => {\n      setPreviewSource(reader.result)\n    }\n  }\n\n  useEffect(() => {\n    register(name, { required: true })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [register])\n\n  useEffect(() => {\n    setValue(name, selectedFile)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedFile, setValue])\n\n  return (\n    <div className=\"flex flex-col space-y-2\">\n      <label className=\"text-sm text-richblack-5\" htmlFor={name}>\n        {label} {!viewData && <sup className=\"text-pink-200\">*</sup>}\n      </label>\n      <div\n        className={`${\n          isDragActive ? \"bg-richblack-600\" : \"bg-richblack-700\"\n        } flex min-h-[250px] cursor-pointer items-center justify-center rounded-md border-2 border-dotted border-richblack-500`}\n      >\n        {previewSource ? (\n          <div className=\"flex w-full flex-col p-6\">\n            {!video ? (\n              <img\n                src={previewSource}\n                alt=\"Preview\"\n                className=\"h-full w-full rounded-md object-cover\"\n              />\n            ) : (\n              <Player aspectRatio=\"16:9\" playsInline src={previewSource} />\n            )}\n            {!viewData && (\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setPreviewSource(\"\")\n                  setSelectedFile(null)\n                  setValue(name, null)\n                }}\n                className=\"mt-3 text-richblack-400 underline\"\n              >\n                Cancel\n              </button>\n            )}\n          </div>\n        ) : (\n          <div\n            className=\"flex w-full flex-col items-center p-6\"\n            {...getRootProps()}\n          >\n            <input {...getInputProps()} ref={inputRef} />\n            <div className=\"grid aspect-square w-14 place-items-center rounded-full bg-pure-greys-800\">\n              <FiUploadCloud className=\"text-2xl text-yellow-50\" />\n            </div>\n            <p className=\"mt-2 max-w-[200px] text-center text-sm text-richblack-200\">\n              Drag and drop an {!video ? \"image\" : \"video\"}, or click to{\" \"}\n              <span className=\"font-semibold text-yellow-50\">Browse</span> a\n              file\n            </p>\n            <ul className=\"mt-10 flex list-disc justify-between space-x-12 text-center  text-xs text-richblack-200\">\n              <li>Aspect ratio 16:9</li>\n              <li>Recommended size 1024x576</li>\n            </ul>\n          </div>\n        )}\n      </div>\n      {errors[name] && (\n        <span className=\"ml-2 text-xs tracking-wide text-pink-200\">\n          {label} is required\n        </span>\n      )}\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}